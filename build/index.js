#!/usr/bin/env node
var __awaiter=this&&this.__awaiter||function(e,a,s,l){return new(s=s||Promise)(function(t,i){function n(e){try{o(l.next(e))}catch(e){i(e)}}function r(e){try{o(l.throw(e))}catch(e){i(e)}}function o(e){var i;e.done?t(e.value):((i=e.value)instanceof s?i:new s(function(e){e(i)})).then(n,r)}o((l=l.apply(e,a||[])).next())})};import yargs from"yargs";import{hideBin}from"yargs/helpers";import Directory from"./Directory.js";import File from"./File.js";import chalkAnimation from"chalk-animation";import figlet from"figlet";import{writeFileSync}from"fs";const sleep=(i=2e3)=>new Promise(e=>setTimeout(e,i)),main=()=>__awaiter(void 0,void 0,void 0,function*(){console.clear();let t;figlet.text("LNKCHKR",{font:"Banner3"},(e,i)=>{i=null!=i?i:"LNKCHKR";t=chalkAnimation.glitch(i,2)}),yield sleep(),t.stop();var e=yield yargs(hideBin(process.argv)).options({d:{demandOption:!1,alias:"directory",describe:"Directory to check",type:"string"},f:{demandOption:!1,alias:"file",describe:"File to check",type:"string"},s:{demandOption:!1,alias:"save",describe:"Save result to a file",type:"boolean"},m:{demandOption:!1,alias:"mark",describe:"Mark dead links in files",type:"boolean"}}).help().strict().alias("help","h").argv;let i;e.f&&(i=new File(e.f,e.m)),yield(i=e.d?new Directory(e.d,e.m):i).checkLinks(),e.s&&writeFileSync("lnkchkr-result.json",JSON.stringify(i.deadLinks))});main();