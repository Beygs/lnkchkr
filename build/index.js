#!/usr/bin/env node
var __awaiter=this&&this.__awaiter||function(e,o,s,l){return new(s=s||Promise)(function(t,i){function n(e){try{a(l.next(e))}catch(e){i(e)}}function r(e){try{a(l.throw(e))}catch(e){i(e)}}function a(e){var i;e.done?t(e.value):((i=e.value)instanceof s?i:new s(function(e){e(i)})).then(n,r)}a((l=l.apply(e,o||[])).next())})};import yargs from"yargs";import{hideBin}from"yargs/helpers";import Directory from"./Directory.js";import File from"./File.js";import chalkAnimation from"chalk-animation";import figlet from"figlet";import{writeFileSync}from"fs";import beautify from"js-beautify";const sleep=(i=2e3)=>new Promise(e=>setTimeout(e,i)),main=()=>__awaiter(void 0,void 0,void 0,function*(){console.clear();let t;figlet.text("LNKCHKR",{font:"Banner3"},(e,i)=>{i=null!=i?i:"LNKCHKR";t=chalkAnimation.glitch(i,2)}),yield sleep(),t.stop();var e,i=yield yargs(hideBin(process.argv)).options({d:{demandOption:!1,alias:"directory",describe:"Directory to check",type:"string"},f:{demandOption:!1,alias:"file",describe:"File to check",type:"string"},s:{demandOption:!1,alias:"save",describe:"Save result to a file",type:"boolean"},m:{demandOption:!1,alias:"mark",describe:"Mark dead links in files",type:"boolean"}}).help().strict().alias("help","h").argv;let n;i.f&&(n=new File(i.f,i.m)),yield(n=i.d?new Directory(i.d,i.m):n).checkLinks(),i.s&&(i={indent_size:2,space_in_empty_paren:!0},e=JSON.stringify(n.deadLinks),writeFileSync("lnkchkr-result.json",beautify(e,i)))});main();