var _Directory_instances,_Directory_getFiles,__awaiter=this&&this.__awaiter||function(t,a,o,c){return new(o=o||Promise)(function(i,e){function r(t){try{s(c.next(t))}catch(t){e(t)}}function n(t){try{s(c.throw(t))}catch(t){e(t)}}function s(t){var e;t.done?i(t.value):((e=t.value)instanceof o?e:new o(function(t){t(e)})).then(r,n)}s((c=c.apply(t,a||[])).next())})},__classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(t,e,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t===e&&r:e.has(t))return"m"===i?r:"a"===i?r.call(t):r?r.value:e.get(t);throw new TypeError("Cannot read private member from an object whose class did not declare it")};import glob from"glob";import File from"./File.js";class Directory{constructor(t,e){this.path=t,this.mark=e,_Directory_instances.add(this),this.files=__classPrivateFieldGet(this,_Directory_instances,"m",_Directory_getFiles).call(this),this.deadLinks=[]}checkLinks(){return __awaiter(this,void 0,void 0,function*(){for(const e of this.files){var t=yield e.checkLinks();0<t.deadLinks.length&&this.deadLinks.push(t)}})}}_Directory_instances=new WeakSet,_Directory_getFiles=function(){return glob.sync(this.path+"/**/*",{nodir:!0}).map(t=>new File(t,this.mark))};export default Directory;